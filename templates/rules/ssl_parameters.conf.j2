ssl_protocols TLSv1.3 TLSv1.2;

ssl_ciphers EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA512:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:ECDH+AESGCM:ECDH+AES256:DH+AESGCM:DH+AES256:RSA+AESGCM:!aNULL:!eNULL:!LOW:!RC4:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS;
ssl_prefer_server_ciphers on;

ssl_dhparam /etc/nginx/ssl/{{dh_parameter_filename}};
ssl_ecdh_curve secp384r1;

add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains; preload' always;

ssl_stapling on;
ssl_stapling_verify on;

ssl_session_cache shared:TLS:2m;
ssl_buffer_size 4k;

ssl_session_timeout 10m;
ssl_session_cache off;
ssl_session_tickets on;
{% if ticketkey_enabled %}
ssl_session_ticket_key /etc/nginx/ssl/{{ticketkey_filename}};
{% endif %}
